# Cloudflare Tunnel override - Use when exposing n8n via Cloudflare Tunnel only
# This binds all n8n ports to localhost since cloudflared handles external access.
#
# Usage: docker compose -f docker-compose.yml -f docker-compose.cloudflare.yml up -d

services:
  n8n:
    ports:
      - "127.0.0.1:5678:5678"
      - "127.0.0.1:5679:5679"

  n8n-webhook:
    ports:
      - "127.0.0.1:5680:5678"

  cloudflared:
    depends_on:
      n8n:
        condition: service_healthy
      n8n-webhook:
        condition: service_healthy
